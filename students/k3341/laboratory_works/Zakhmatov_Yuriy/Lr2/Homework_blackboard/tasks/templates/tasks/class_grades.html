{% extends 'base.html' %}
{% block title %}–û—Ü–µ–Ω–∫–∏ –∫–ª–∞—Å—Å–∞{% endblock %}

{% block content %}
<div class="container">
    <h2 class="mb-4">üìä –û—Ü–µ–Ω–∫–∏ –∫–ª–∞—Å—Å–∞</h2>

    {% if homeworks %}
    <div class="table-responsive">
        <table class="table table-bordered table-striped">
            <thead class="table-primary">
                <tr>
                    <th>–£—á–µ–Ω–∏–∫</th>
                    {% for homework in homeworks %}
                    <th class="text-center" style="min-width: 80px;">
                        <div class="small fw-bold">{{ homework.subject.name }}</div>
                        <div class="small text-muted">{{ homework.due_date|date:"d.m" }}</div>
                    </th>
                    {% endfor %}
                    <th class="text-center">–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</th>
                </tr>
            </thead>
            <tbody>
                {% for student_data in grades_data %}
                <tr {% if student_data.student == user %}class="table-info"{% endif %}>
                    <td class="fw-bold">
                        {% if student_data.student == user %}
                            ‚≠ê {{ student_data.student.username }}
                        {% else %}
                            üë§ {{ student_data.student.username }}
                        {% endif %}
                    </td>
                    
                    {% for grade in student_data.grades %}
                    <td class="text-center align-middle">
                        {% if grade %}
                            <span class="badge bg-success fs-6">{{ grade }}</span>
                        {% else %}
                            <span class="text-muted">‚Äî</span>
                        {% endif %}
                    </td>
                    {% endfor %}
                    
                    <td class="text-center fw-bold">
                        {% if student_data.average_grade %}
                            {{ student_data.average_grade }}
                        {% else %}
                            ‚Äî
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="alert alert-info text-center">
        –ó–∞–¥–∞–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç.
    </div>
    {% endif %}
</div>
{% endblock %}